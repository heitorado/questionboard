// Configure toastr notification
toastr.options = {
    "closeButton": false,
    "debug": false,
    "newestOnTop": false,
    "progressBar": false,
    "positionClass": "toast-bottom-right",
    "preventDuplicates": true,
    "onclick": null,
    "showDuration": "300",
    "hideDuration": "1000",
    "timeOut": "5000",
    "extendedTimeOut": "1000",
    "showEasing": "swing",
    "hideEasing": "linear",
    "showMethod": "fadeIn",
    "hideMethod": "fadeOut"
  }


document.body.addEventListener('ajax:success', function(event) {
    var detail = event.detail;
    var data = detail[0], status = detail[1], xhr = detail[2];

    // Display toastr success notification
    toastr["success"]("Message sent!");

    // Erase text input field
    $('#question-text-input').val('');

    console.log('sucesso!')
});

document.body.addEventListener('ajax:error', function(event) {
    var detail = event.detail;
    var data = detail[0], status = detail[1], xhr = detail[2];

    // Recover a list of the errors that prevented the message from being sent, if any
    <% if @question.errors.any? %>

        // Concatenate all error messages
        <% triggered_errors = j @question.errors.full_messages.join('; ') %>
        
        // Display toastr success notification with the list of errors
        toastr["error"]("Error(s) while sending your message: <%= j(triggered_errors) %> ");

    <% elsif @question.errors.empty? %>
        toastr["error"]("Server error! Please try again later, sorry! :(");
    <% end %>

});